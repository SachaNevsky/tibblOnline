import{w as b,a as x,p as r}from"./chunk-EPOLDU6W-Wp3N_t67.js";function w({}){return[{title:"Code to Visual - TIBBL Online"},{name:"description",content:"Convert TIBBL code to visual representation"}]}const h="https://raw.githubusercontent.com/armbennett/tangible-11ty/main",y={add:{name:"X = X + 1",command:"x = x + 1",rotatable:!1},subtract:{name:"X = X - 1",command:"x = x - 1",rotatable:!1},delay:{name:"Delay",command:"delay",rotatable:!0,rotationValues:["1","2","3","4","5","6","7","8"]},else:{name:"Else",command:"else",rotatable:!1},endfunction:{name:"End Function",command:"end function",rotatable:!1},endif:{name:"End If",command:"end if",rotatable:!1},endloop:{name:"End Loop",command:"end loop",rotatable:!1},function:{name:"Function",command:"function",rotatable:!1},functioncall:{name:"Call Function",command:"call function",rotatable:!1},if:{name:"If X <",command:"if x <",rotatable:!0,rotationValues:["1","2","3","4","5","6","7","8"]},loop:{name:"Loop",command:"loop",rotatable:!0,rotationValues:["1","2","3","4","5","6","7","8"]},play:{name:"Play",command:"play",rotatable:!0,rotationValues:["1","2","3","4","5","6","7","8"]},playx:{name:"Play X",command:"play x",rotatable:!1},random:{name:"X=Random",command:"x = random",rotatable:!1},thread1:{name:"Thread 1",command:"thread 1",rotatable:!1},thread2:{name:"Thread 2",command:"thread 2",rotatable:!1},thread3:{name:"Thread 3",command:"thread 3",rotatable:!1},variable:{name:"X =",command:"x =",rotatable:!0,rotationValues:["1","2","3","4","5","6","7","8"]}};function g(o){const e=Array(7).fill(null).map(()=>Array(5).fill(null));if(!o.trim())return e[0][0]={type:"thread1",rotation:0},e[0][1]={type:"loop",rotation:2},e[0][2]={type:"play",rotation:1},e[0][3]={type:"endloop",rotation:0},{success:!0,grid:e};const t=o.toLowerCase().trim().split(`
`).filter(s=>s.trim()),i=[];for(let s=0;s<t.length;s++){const a=t[s].trim();if(!a)continue;const l=N(a);if(!l.success)return{success:!1,grid:e,error:`Line ${s+1}: ${l.error}`};const p=l.tile?.type==="thread1"||l.tile?.type==="thread2"||l.tile?.type==="thread3";i.push({tile:l.tile||null,isThread:p,lineNum:s+1})}const d=i.filter(s=>s.tile!==null).length,m=35,u=i.some(s=>s.isThread);let f=!1;if(u&&d<=m){let s=0,a=0;for(let l=0;l<i.length;l++){const p=i[l];if(p.tile){if(p.isThread&&a>0&&(s++,a=0),s>=7)break;a>=5&&(s++,a=0),s<7&&a++}}f=s<7}let c=0,n=0;for(let s=0;s<i.length;s++){const a=i[s];if(a.tile){if(f&&a.isThread&&n>0&&(c++,n=0),c>=7)return{success:!1,grid:e,error:"Code exceeds grid size (7 rows maximum)"};if(n>=5&&(c++,n=0,c>=7))return{success:!1,grid:e,error:"Code exceeds grid size (7 rows maximum)"};e[c][n]=a.tile,n++}}return{success:!0,grid:e}}function N(o){const e=o.split(/\s+/);if(e[0]==="thread"){if(e.length<2)return{success:!1,error:"Thread command requires a thread number (1, 2, or 3)"};const t=e[1];return t==="1"?{success:!0,tile:{type:"thread1",rotation:0}}:t==="2"?{success:!0,tile:{type:"thread2",rotation:0}}:t==="3"?{success:!0,tile:{type:"thread3",rotation:0}}:{success:!1,error:"Thread number must be 1, 2, or 3"}}if(e[0]==="loop"){if(e.length<2)return{success:!1,error:"Loop command requires a number (1-8)"};const t=parseInt(e[1]);return isNaN(t)||t<1||t>8?{success:!1,error:"Loop number must be between 1 and 8"}:{success:!0,tile:{type:"loop",rotation:t-1}}}if(e[0]==="end"&&e[1]==="loop")return{success:!0,tile:{type:"endloop",rotation:0}};if(e[0]==="play"){if(e.length<2)return{success:!1,error:"Play command requires a note number (1-8) or x"};if(e[1]==="x")return{success:!0,tile:{type:"playx",rotation:0}};const t=parseInt(e[1]);return isNaN(t)||t<1||t>8?{success:!1,error:"Play note must be between 1 and 8, or x"}:{success:!0,tile:{type:"play",rotation:t-1}}}if(e[0]==="delay"){if(e.length<2)return{success:!1,error:"Delay command requires a duration (1-8)"};const t=parseInt(e[1]);return isNaN(t)||t<1||t>8?{success:!1,error:"Delay duration must be between 1 and 8"}:{success:!0,tile:{type:"delay",rotation:t-1}}}if(e[0]==="x"){if(e.length<2||e[1]!=="=")return{success:!1,error:'Variable command must be in format "x = ..." '};if(e.length>=3&&e[2]==="random")return{success:!0,tile:{type:"random",rotation:0}};if(e.length>=5&&e[2]==="x")return e[3]==="+"&&e[4]==="1"?{success:!0,tile:{type:"add",rotation:0}}:e[3]==="-"&&e[4]==="1"?{success:!0,tile:{type:"subtract",rotation:0}}:{success:!1,error:'Variable arithmetic must be "x = x + 1" or "x = x - 1"'};if(e.length>=3){const t=parseInt(e[2]);return isNaN(t)||t<1||t>8?{success:!1,error:"Variable value must be between 1 and 8"}:{success:!0,tile:{type:"variable",rotation:t-1}}}return{success:!1,error:"Invalid variable command"}}if(e[0]==="if"){if(e.length<4||e[1]!=="x"||e[2]!=="<")return{success:!1,error:'If command must be in format "if x < number"'};const t=parseInt(e[3]);return isNaN(t)||t<1||t>8?{success:!1,error:"If condition must be between 1 and 8"}:{success:!0,tile:{type:"if",rotation:t-1}}}return e[0]==="else"?{success:!0,tile:{type:"else",rotation:0}}:e[0]==="end"&&e[1]==="if"?{success:!0,tile:{type:"endif",rotation:0}}:e[0]==="function"?{success:!0,tile:{type:"function",rotation:0}}:e[0]==="end"&&e[1]==="function"?{success:!0,tile:{type:"endfunction",rotation:0}}:e[0]==="call"&&e[1]==="function"?{success:!0,tile:{type:"functioncall",rotation:0}}:{success:!1,error:`Unknown command: "${o}"`}}function j(o){const e=y[o.type];if(!e.rotatable)return e.name;const t=o.rotation%8+1;return`${e.name} ${t}`}const T=b(function(){const[e,t]=x.useState(""),[i,d]=x.useState(Array(7).fill(null).map(()=>Array(5).fill(null))),[m,u]=x.useState(null),f=()=>{const n=g(e);e||t(`thread 1
loop 3 times
play 2
end loop`),n.success?(d(n.grid),u(null)):u(n.error||"Unknown error")},c=()=>{t(""),d(Array(7).fill(null).map(()=>Array(5).fill(null))),u(null)};return r.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8",children:r.jsxs("div",{className:"max-w-2/3 mx-auto",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("h1",{className:"inline-flex items-center gap-2 text-2xl sm:text-3xl lg:text-4xl font-bold",children:[r.jsx("img",{src:"tibbl-logo.png",alt:"Tibbl logo",className:"h-[1em] w-auto"}),"Reverse"]}),r.jsx("a",{href:"/tibblOnline/",className:"pl-4 inline-flex items-center gap-2 text-2xl sm:text-3xl lg:text-4xl font-bold text-blue-500",children:"Go to main"})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:"codeInput",className:"text-lg font-semibold my-4",children:"Enter Code:"}),r.jsx("textarea",{id:"codeInput",value:e,onChange:n=>t(n.target.value),className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg p-4 font-mono text-sm resize-none focus:outline-none focus:border-blue-500 min-h-75",placeholder:`Example:

thread 1
loop 3 times
play 2
end loop`}),r.jsxs("div",{className:"flex gap-4 mt-4",children:[r.jsx("button",{onClick:f,className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition font-semibold",children:"Generate Visual"}),r.jsx("button",{onClick:c,className:"px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg transition",children:"Clear"})]}),m&&r.jsxs("div",{className:"mt-4 p-4 bg-red-900/50 border border-red-700 rounded-lg",children:[r.jsx("p",{className:"text-red-200 font-semibold",children:"Error:"}),r.jsx("p",{className:"text-red-300",children:m})]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h2",{className:"text-lg font-semibold my-4",children:"Visual Representation:"}),r.jsx("div",{className:"bg-gray-800 p-6 rounded-lg flex-1 flex items-center justify-center",children:r.jsx("div",{className:"grid grid-cols-5 gap-2 w-9/10",style:{aspectRatio:"5/7"},children:i.map((n,s)=>n.map((a,l)=>r.jsx("div",{className:`border border-dashed rounded flex flex-col items-center justify-center aspect-square ${a?"border-green-500 bg-gray-700":"border-gray-600 bg-gray-750"}`,children:a&&r.jsxs("div",{className:"w-full h-full flex items-center justify-center p-1 select-none flex-col",children:[r.jsx("img",{src:`${h}/assets/demo-files/tiles/${a.type}.png`,alt:`${a.type} tile`,className:"w-full h-full object-contain p-1"}),r.jsx("div",{className:"text-xs text-center text-gray-300 px-1",children:j(a)})]})},`${s}-${l}`)))})})]})]})]})})});export{T as default,w as meta};
